(function ($, window, document) {
    console.log("init");

    var App = {
        init: function ($) {
            this.select2();
            this.stellar();
            this.carousel();
            this.portfolio();
            this.lightCase();
            this.sideNav();
            this.counter();
            this.skills();
            this.aos();
            this.navbarChange();
        },
        select2: function () {
            $(document).ready(function () {
                $("select").select2();
            });
        },
        stellar: function () {
            var windowWidth = $(window).width();
            if (windowWidth >= 767) {
                $(".bg-fixed").attr("data-stellar-background-ratio", "0.8");
                $.stellar({
                    horizontalScrolling: false,
                    responsive: true,
                    parallaxBackgrounds: true,
                    scrollProperty: "scroll"
                });
            }
        },
        carousel: function () {
            $(".testi-carousel").owlCarousel({
                loop: true,
                margin: 10,
                autoplay: true,
                nav: false,
                dots: true,
                dotSpeed: 1000,
                autoplaySpeed: 1000,
                items: 1
            });

            $(".client-slider").owlCarousel({
                loop: true,
                margin: 10,
                nav: true,
                navSpeed: 1000,
                dots: false,
                autoplay: true,
                autoplaySpeed: 1000,
                navText: ['<span class="fa fa-angle-left"></span>', '<span class="fa fa-angle-right"></span>'],
                responsive: {
                    0: { items: 1 },
                    600: { items: 3 },
                    1000: { items: 6 }
                }
            });
        },
        portfolio: function () {
            var $grid = $(".grid-portfolio").isotope({
                itemSelector: ".grid-item",
                masonry: {
                    gutter: ".gutter-sizer",
                    columnWidth: ".grid-sizer"
                },
                percentPosition: true
            });

            $(".filter-button-group").on("click", "a", function () {
                var filterValue = $(this).attr("data-filter");
                $grid.isotope({ filter: filterValue });
            });

            $(".btn-filter a.is-checked").addClass("active");

            $(".btn-filter a").on("click", function () {
                $(".btn-filter a").removeClass("active");
                $(this).addClass("active");
            });
        },
        lightCase: function () {
            $(document).ready(function () {
                $("a[data-rel^=lightcase]").lightcase();
            });
        },
        sideNav: function () {
            $("#side-nav-open").click(function () {
                $("#side-nav").css("width", "300");
                setTimeout(function () {
                    $("body").addClass("sidenav-open");
                }, 200);
                setTimeout(function () {
                    $("body").addClass("in");
                }, 400);
            });

            $("#side-nav-close, #canvas-overlay").click(function () {
                setTimeout(function () {
                    $("body").removeClass("in");
                }, 200);
                setTimeout(function () {
                    $("body").removeClass("sidenav-open");
                    $("#side-nav").css("width", "0");
                }, 400);
            });

            $("#side-search-open").click(function () {
                $("#side-search").css("width", "300");
                setTimeout(function () {
                    $("body").addClass("sidesearch-open");
                }, 200);
                setTimeout(function () {
                    $("body").addClass("in");
                }, 300);
            });

            $("#side-search-close, #canvas-overlay").click(function () {
                setTimeout(function () {
                    $("body").removeClass("in");
                }, 200);
                setTimeout(function () {
                    $("body").removeClass("sidesearch-open");
                    $("#side-search").css("width", "0");
                }, 300);
            });
        },
        counter: function () {
            $("#counter").each(function () {
                $(this).waypoint({
                    handler: function (direction) {
                        $(".number").countTo({ speed: 1000 });
                        this.destroy();
                    },
                    offset: "80%"
                });
            });
        },
        skills: function () {
            $("#skills").each(function () {
                var $this = $(this);
                $this.waypoint({
                    handler: function (direction) {
                        $(".progress").each(function () {
                            $(this).find(".progress-bar").delay(10000).css({ width: $(this).attr("data-percent") });
                        });
                    },
                    offset: "80%"
                });
            });
        },
        aos: function () {
            AOS.init({ once: true });
        },
        navbarChange: function () {
            $(window).scroll(function () {
                var scrollPosition = $(window).scrollTop();
                if (scrollPosition > 150) {
                    $("#header-navbar").removeClass("navbar-transparent");
                    $("body").addClass("not-on-top");
                } else {
                    $("body").removeClass("not-on-top");
                    $("#header-navbar").addClass("navbar-transparent");
                }
            });
        }
    };

    $(document).ready(function () {
        App.init($);
    });

})(window.jQuery, window, document);

